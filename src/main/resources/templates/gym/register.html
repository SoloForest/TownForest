<html layout:decorate="~{home/layout.html}">

<head>
    <title layout:title-pattern="$CONTENT_TITLE | $LAYOUT_TITLE">이용권구입</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.6/datepicker.min.js"></script>
</head>

<body>

<main layout:fragment="main" class="flex items-center justify-center h-screen">
    <div class="w-full px-4 flex flex-col">
        <div class="flex gap-2 items-center justify-center">
            <i class="fa-solid fa-ticket" style="color: #91c0fd;"></i>
            <h2 class="card-title">이용권 구입</h2>
        </div>

        <div class="card-body bg-base-100 shadow-xl m-2 mt-4">
            <div class="flex wrap items-center gap-2">
                <i class="fa-regular fa-calendar-days" style="color: #91c0fd;"></i>
                <h2 class="font-bold">이용권 정보</h2>
            </div>
            <div class="form-control flex gap-2 mt-2">
                <label class="flex items-center gap-2">
                    <input type="checkbox" class="checkbox checkbox-primary" value="1000"/>
                    <span class="label-text">1일권 - 1,000원</span>
                </label>
                <label class="flex items-center gap-2">
                    <input type="checkbox" class="checkbox checkbox-primary" value="30000"/>
                    <span class="label-text">30일권 - 30,000원</span>
                </label>
                <label class="flex items-center gap-2">
                    <input type="checkbox" class="checkbox checkbox-primary" value="54000"/>
                    <span class="label-text">60일권 - 54,000원(10% 할인가)</span>
                </label>
                <label class="flex items-center gap-2">
                    <input type="checkbox" class="checkbox checkbox-primary" value="72000"/>
                    <span class="label-text">90일권 - 72,000원(20% 할인가)</span>
                </label>
            </div>

            <div class="mt-4">
                <div class="flex wrap items-center gap-2">
                    <i class="fa-regular fa-calendar-days" style="color: #91c0fd;"></i>
                    <h2 class="font-bold">이용 시작일 지정</h2>
                </div>
                <div class="relative max-w-sx mt-2">
                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                        <svg aria-hidden="true" class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="currentColor"
                             viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                  d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                                  clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <input id="startDate" type="date"
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-10/12 pl-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                           placeholder="이용 시작일을 선택해주세요">
                </div>
            </div>
        </div>


        <div class="flex justify-end wrap items-center gap-2">
            <i class="fa-regular fa-circle-check" style="color: #91c0fd;"></i>
            <p>결제금액 : </p>
            <div id="payment-amount"></div>
        </div>
        <div class="flex justify-end">
            <button class="btn shadow-xl m-2" style="background-color: #91c0fd;">결제하기</button>
        </div>
    </div>

    <!-- 체크박스 선택 시 이전 선택한거 삭제 후 선택, 선택된 폰트 굵게 -->
    <script>
        const checkboxes = document.querySelectorAll('.checkbox');
        const paymentAmountElement = document.getElementById('payment-amount');

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                if (checkbox.checked) {
                    checkboxes.forEach(c => {
                        if (c !== checkbox) {
                            c.checked = false;
                            c.nextElementSibling.classList.remove('font-semibold');
                        }
                    });

                    checkbox.nextElementSibling.classList.add('font-semibold');
                    const paymentAmount = parseInt(checkbox.value);
                    const formattedPaymentAmount = paymentAmount.toLocaleString();
                    paymentAmountElement.textContent = formattedPaymentAmount + '원';
                    paymentAmountElement.classList.add('font-semibold');
                } else {
                    checkbox.nextElementSibling.classList.remove('font-semibold');
                    paymentAmountElement.textContent = '';
                    paymentAmountElement.classList.remove('font-semibold');
                }
            });
        });

    </script>


</main>
</body>
</html>

